var Quiz=function(){function t(t){this.index=0,this.hintUsed=!1,this.hints=0,this.scores=[],this.questions=t.questions,this.lang=t.lang}return t.prototype.getScore=function(){for(var t=0,e=[],s=0;s<this.scores.length;s++){var n=this.scores[s];-1==e.indexOf(n.weight)&&e.push(n.weight)}for(var i=0;i<e.length;i++){var d=e[i],o=0,r=0;for(s=0;s<this.scores.length;s++)n=this.scores[s],n.weight==d&&(o+=n.score,r++);t+=o/r*d}return t=Math.round(100*t),t},t.prototype.populate=function(){if(0==this.index){for(var t=this.questions.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),s=this.questions[t];this.questions[t]=this.questions[e],this.questions[e]=s}document.getElementById("next-question").innerText=this.lang.nextquestion}this.hintUsed=!1,document.getElementById("description").classList.add("hidden"),document.getElementById("next-question").classList.add("hidden"),document.getElementById("question-options").classList.remove("hidden");var n=document.getElementById("hint");n.classList.remove("hidden"),this.hints<.3*this.questions.length?(n.classList.remove("btn-secondary"),n.classList.add("btn-primary"),n.disabled=!1,n.title=this.lang.hintnotused.replace("%s",String(Math.round(.3*this.questions.length)-this.hints))):(n.classList.remove("btn-primary"),n.classList.add("btn-secondary"),n.disabled=!0,n.title=this.lang.hintsfinished);var i=this.questions[this.index];document.getElementById("question-header").innerText=i.prompt,document.getElementById("question-index").innerText=this.lang.questionindex.replace("%s",String(this.index+1));for(var d=document.getElementById("question-options");d.firstChild;)d.removeChild(d.firstChild);for(t=0;t<i.options.length;t++){var o=document.createElement("div");o.classList.add("question-option");var r=document.createElement("button");r.id="option-"+t,r.innerText=i.options[t],r.classList.add("btn"),r.classList.add("btn-primary"),r.onclick=function(t,e){return function(){t.check(e)}}(this,t),o.appendChild(r),d.appendChild(o)}for(t=d.children.length;t>=0;t--)d.appendChild(d.children[Math.random()*t|0])},t.prototype.check=function(t){var e=document.getElementById("description"),s=document.getElementById("description-header"),n=document.getElementById("description-body"),i=document.getElementById("next-question"),d=document.getElementById("submit"),o=document.getElementById("submit-score"),r=document.getElementById("submit-btn"),h=this.questions[this.index];if(document.getElementById("hint").classList.add("hidden"),document.getElementById("question-options").classList.add("hidden"),e.classList.remove("hidden"),e.classList.remove("bg-success"),e.classList.remove("bg-danger"),i.classList.remove("btn-success"),i.classList.remove("btn-danger"),n.innerHTML=h.description,h.answer==t){var a=0;a=this.hintUsed?.6:1,this.scores.push({score:a,weight:h.weight}),s.innerText=this.lang.descriptioncorrect,e.classList.add("bg-success"),this.index==this.questions.length-1?(o.value=String(this.getScore()),r.classList.add("btn-success"),r.value=this.lang.finish,d.classList.remove("hidden")):(i.classList.add("btn-success"),i.classList.remove("hidden"))}else this.scores.push({score:0,weight:h.weight}),s.innerText=this.lang.descriptionwrong,e.classList.add("bg-danger"),this.index==this.questions.length-1?(o.value=String(this.getScore()),r.classList.add("btn-danger"),r.value=this.lang.finish,d.classList.remove("hidden")):(i.classList.remove("hidden"),i.classList.add("btn-danger"))},t.prototype.hint=function(){function t(e,s,n){var i=Math.floor(Math.random()*(s-e+1))+e;return n.indexOf(i)>-1?t(e,s,n):i}this.hints++,this.hintUsed=!0;for(var e=this.questions[this.index],s=document.getElementById("hint"),n=[e.answer],i=0;i<e.options.length/2;i++){var d=t(0,e.options.length-1,n),o=document.getElementById("option-"+d);o.classList.remove("btn-primary"),o.classList.add("btn-danger"),o.disabled=!0,n.push(d)}s.classList.remove("btn-primary"),s.classList.add("btn-secondary"),s.disabled=!0,s.title=this.lang.hintused.replace("%s",String(Math.round(.3*this.questions.length)-this.hints))},t.prototype.next=function(){this.index++,this.populate()},t}();